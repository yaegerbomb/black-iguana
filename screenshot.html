<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
	<style>
		.button-success {
            background: rgb(28, 184, 65); /* this is a green */
        }
	</style>
</head>
<body>
	<div class="pure-g">
		<img src="screenshotCropped.jpg" />
	</div>
	<div class="pure-g">
		<button id="cancelButton" class="pure-button pure-button-active">Cancel</button>
		<button id="uploadButton" class="pure-button button-success pure-button-active">Upload</button>
	</div>	
	
	<script>
		const remote = require('remote'); 
		const imgur = require("imgur");	
		const clipboard = require('electron').clipboard;
		
		document.getElementById("uploadButton").addEventListener("click", function(){
			imgur.uploadFile("screenshotCropped.jpg")
				.then(function (json) {
					console.log(json.data.link);
					clipboard.writeText(json.data.link);
					new Notification('Title', {
						body: 'Copied to clipboard'
					});
					
					var window = remote.getCurrentWindow();
					window.close();
				})
				.catch(function (err) {
					console.error(err.message);
				});
		});
		
		document.getElementById("cancelButton").addEventListener("click", function(){			
			var window = remote.getCurrentWindow();
			window.close();
		});
	</script>
</body>
</html>